---
import { imageUrl, srcset, THUMB_WIDTHS, GALLERY_SIZES } from "../lib/images";
const { entry } = Astro.props;
const { slug, data } = entry;

const defaultThumb = 720;
---

<article class="card">
  <a href={`/portfolio/${slug}`} style="text-decoration:none;">
    <div class="thumb">
      <img
        src={imageUrl(data.imageSlug, defaultThumb)}
        srcset={srcset(data.imageSlug, THUMB_WIDTHS)}
        sizes={GALLERY_SIZES}
        alt={data.coverAlt}
        loading="lazy"
        decoding="async"
      />
    </div>

    <div class="meta">
      <div class="titleRow">
        <strong>{data.title}</strong>
        <span class="badge">{data.category}</span>
      </div>

      <div class="sub">
        {
          data.location || data.date ? (
            <>
              {data.location ? data.location : ""}
              {data.location && data.date ? " • " : ""}
              {data.date ? data.date : ""}
            </>
          ) : (
            <span class="placeholder">—</span>
          )
        }
      </div>
    </div>
  </a>
</article>
